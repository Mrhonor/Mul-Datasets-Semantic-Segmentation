{
    "model_name": "hrnet_w48",
    "aux_mode": "train",
    "n_datasets": 3,
    "num_unify_classes": 46,
    "hrnet": {
      "cfg": "hrnet48",
      "keep_imagenet_head": false,
      "drop_stage4": false,
      "full_res_stem": false
    },
    "dataset1": {
      "n_cats": 20,
      "data_reader": "CityScapes",
      "im_root": "/dev/dataset/",
      "train_im_anns":"datasets/Cityscapes/train.txt",
      "val_im_anns":"datasets/Cityscapes/val.txt", 
      "ims_per_gpu": 1,
      "eval_ims_per_gpu": 2
    },
    "dataset2": {
      "n_cats": 13, 
      "data_reader": "CamVid",
      "im_root": "/dev/dataset/CamVid",
      "train_im_anns":"datasets/CamVid/train.txt",
      "val_im_anns":"datasets/CamVid/test.txt", 
      "ims_per_gpu": 1,
      "eval_ims_per_gpu": 2
    },
    "dataset3": {
      "n_cats": 36, 
      "data_reader": "A2D2Data",
      "im_root": "/dev/shm/dataset/a2d2",
      "train_im_anns":"datasets/A2D2/train.txt",
      "val_im_anns":"datasets/A2D2/val.txt", 
      "ims_per_gpu": 2,
      "eval_ims_per_gpu": 2
    },
    "n_bn": 3,
    "class_remap1":{
      "0": [0, 24, 26, 31, 33, 37, 39, 41, 44], 
      "1": [1, 25, 30],
      "2": [2, 3], 
      "3": [4, 5],
      "4": [6, 28, 42],
      "5": [7, 23, 35],
      "6": [8, 36],
      "7": [9, 27, 38, 43],
      "8": [10],
      "9": [11],
      "10": [12],
      "11": [13],
      "12": [14, 15],
      "13": [16],
      "14": [17],
      "15": [18],
      "16": [19],
      "17": [20],
      "18": [21],
      "19": [22, 29, 32, 34, 45]
    }, 
    "class_remap2":{ 
      "0": [12],
      "1": [2, 3],
      "2": [7, 23, 35, 43],
      "3": [0, 24, 26, 31, 33, 37, 39, 41, 44],
      "4": [1, 25, 30],
      "5": [10, 11],
      "6": [8, 9, 27, 36, 38],
      "7": [6, 28, 42],
      "8": [16, 17, 18, 19, 22, 29],
      "9": [13, 34],
      "10": [14, 15, 20, 21],
      "11": [4, 5],
      "12": [32, 45]
    },
    "class_remap3":{ 
      "0": [16],
      "1": [14, 21],
      "2": [13],
      "3": [17,18],
      "4": [15,20],
      "5": [8],
      "6": [9],
      "7": [22],
      "8": [23],
      "9": [24],
      "10": [25],
      "11": [26],
      "12": [27],
      "13": [28],
      "14": [29],
      "15": [30],
      "16": [31],
      "17": [32],
      "18": [7],
      "19": [33],
      "20": [34],
      "21": [2, 4, 6],
      "22": [35, 36],
      "23": [37],
      "24": [38],
      "25": [39],
      "26": [10, 11],
      "27": [40],
      "28": [1],
      "29": [45],
      "30": [41],
      "31": [42, 43],
      "32": [44],
      "33": [0],
      "34": [12],
      "35": [2, 3, 4, 5]
    },
    "class_weight1":{
      "0": 1, 
      "1": 1,
      "2": 1, 
      "3": 3,
      "4": 1,
      "5": 1,
      "6": 1,
      "7": 1,
      "8": 5,
      "9": 5,
      "10": 1,
      "11": 1,
      "12": 10,
      "13": 1,
      "14": 1,
      "15": 1,
      "16": 5,
      "17": 10, 
      "18": 10,
      "19": 1,
      "20": 1,
      "21": 1,
      "22": 1,
      "23": 1,
      "24": 1,
      "25": 1,
      "26": 1,
      "27": 1,
      "28": 1,
      "29": 1,
      "30": 1,
      "31": 1,
      "32": 1,
      "33": 1,
      "34": 1,
      "35": 1,
      "36": 1,
      "37": 1,
      "38": 1,
      "39": 1,
      "40": 1
    },
    "class_weight2":{
      "0": 1, 
      "1": 1,
      "2": 1, 
      "3": 3,
      "4": 1,
      "5": 1,
      "6": 1,
      "7": 1,
      "8": 1,
      "9": 1,
      "10": 1,
      "11": 1,
      "12": 1,
      "13": 1,
      "14": 1,
      "15": 1,
      "16": 1,
      "17": 1, 
      "18": 1,
      "19": 1,
      "20": 1,
      "21": 1,
      "22": 1,
      "23": 1,
      "24": 1,
      "25": 1,
      "26": 1,
      "27": 1,
      "28": 1,
      "29": 1,
      "30": 1,
      "31": 1,
      "32": 1,
      "33": 1,
      "34": 1,
      "35": 1,
      "36": 1,
      "37": 1,
      "38": 1,
      "39": 1,
      "40": 1
    },
    "class_weight3":{
      "0": 2,
      "1": 1,
      "2": 1,
      "3": 1,
      "4": 1,
      "5": 1,
      "6": 1,
      "7": 1,
      "8": 1,
      "9": 1,
      "10": 1,
      "11": 1,
      "12": 1,
      "13": 1,
      "14": 1,
      "15": 1,
      "16": 1,
      "17": 1,
      "18": 1,
      "19": 1.5,
      "20": 2,
      "21": 10,
      "22": 5,
      "23": 2,
      "24": 5,
      "25": 5,
      "26": 2,
      "27": 2,
      "28": 2,
      "29": 2,
      "30": 2,
      "31": 2,
      "32": 5,
      "33": 2,
      "34": 2,
      "35": 2,
      "36": 2,
      "37": 2,
      "38": 2,
      "39": 2,
      "40": 1
    },
    "class_remaper": "ClassRemapOneHotLabel",
    "loss":{
      "type": "MultiLabelCrossEntropyLoss",
      "reweight": false,
      "with_aux": false,
      "aux_weight": 1,
      "aux_num": 4,
      "ignore_index": 255,
      "domain_loss_weight": 1,
      "m": 0,
      "gamma": 12
    },
    "use_ema": false,
    "lr": {
      "lr_start": 5e-3,
      "weight_decay": 5e-5,
      "warmup_iters": 0,
      "fix_param_iters": 0,
      "max_iter": 100000
    },
    "train": {
      "scales": [0.5, 1.0, 2.0],
      "cropsize": [512, 1024],
      "finetune": false,
      "finetune_from": "res/Mds/model_5000.pth"
    },
    "val": {
      "scales": [0.5, 0.75, 1.0, 1.25, 1.5, 1.75],
      "cropsize": [512, 1024]
    },
    "use_fp16": false,
    "use_sync_bn": true,
    "contrast": {
      "use_contrast": true,
      "proj_dim": 128,
      "temperature": 0.07,
      "base_temperature": 0.07,
      "max_samples": 4096,
      "max_views": 24,
      "loss_weight": 1,
      "num_prototype": 1,
      "coefficient": 0.999,
      "upsample": false,
      "downsample": false,
      "update_confidence_thresh": 0.1,
      "update_sim_thresh": 0.4,
      "with_ppd": false,
      "ppd_loss_weight": 1,
      "with_hard_lb_contrast": true,
      "hard_lb_contrast_loss_weight": 1,
      "with_consistence": false,
      "consistent_loss_weight": 10,
      "with_mulbn": false,
      "memory_bank": true,
      "memory_bank_size": 5000
    },
    "res_save_pth": "res/Mds/",
    "network": {
      "stride": 4,
      "with_domain_adversarial": false,
      "bn_type": "torchbn"
    },
    "dataset_aux_head": {
      "use_dataset_aux_head": false,
      "aux_iter": 15000
    },
    "optim": "AdamW",
    "iter": 0
}
